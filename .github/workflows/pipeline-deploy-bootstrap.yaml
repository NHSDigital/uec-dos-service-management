name: Pipeline Deploy Bootstrapper

on:
  push:
    branches:
      - 'main'

jobs:
    deploy-bootstrap-dos-dev:
      name: Run bootstrap for dos dev account
      uses: ./.github/workflows/deploy-bootstrap.yaml
      with:
        ENV: dev
      secrets: inherit
    deploy-bootstrap-dos-test:
      name: Run bootstrap for dos test account
      uses: ./.github/workflows/deploy-bootstrap.yaml
      with:
        ENV: test
      secrets: inherit
    slack-notifications:
      needs: [
        deploy-bootstrap-dos-dev,
        deploy-bootstrap-dos-test,
      ]
      if: always()
      uses: ./.github/workflows/slack-notifications.yaml
      with:
        env: dev, test
      secrets: inherit


